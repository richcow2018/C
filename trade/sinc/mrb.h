/****************************************************************************/
/*  著作権  １９９４														*/
/*            ＮＴＴデータ通信株式会社										*/
/*              金融システム事業本部										*/
/*																			*/
/*																			*/
/*  収容物  ＡＣＥーＳＭＰシステム   バックアッププロセス／信金（mr_bxxx系）*/
/****************************************************************************/
/* ＜対象業務名＞                    故障回復業務                       　　*/
/* ＜対象業務ＩＤ＞                  ＲＣＶ                                 */
/* ＜サービス項目名＞                バックアッププロセス／信金共通         */
/* ＜サービス項目ＩＤ＞              ｐ０１                                 */
/* ＜モジュール名＞                  バックアッププロセス／信金制御ブロック */ 
/* ＜モジュールＩＤ＞             			                                */
/* ＜モジュール通番＞                	                                　　*/
/*--------------------------------------------------------------------------*/
/* ＜適用機種＞                      ＡＣＥ                                 */
/* ＜適用ＯＳ＞                      ＴＲＡＤＥ                             */
/* ＜開発環境＞                      ＳＵＮ　ＳＰＡＲＣ−ＩＰＸ             */
/* ＜記述言語＞                      Ｃ言語                                 */
/* ＜モジュール形態＞                構造体                                 */
/* ＜機能区分＞                      	                                    */
/* ＜対象データ＞                    	                                　　*/
/* ＜工程・階層区分＞                                                       */
/*--------------------------------------------------------------------------*/
/* ＜開発システム名＞                ＡＣＥ−ＳＭＰシステム                 */
/* ＜開発システム番号＞              ５７２６０１４０２１００               */
/*--------------------------------------------------------------------------*/
/* ＜開発担当者名＞                  営業店システム担当                     */
/* ＜電話番号＞                      169-3573(03-5702-3573)                 */
/*--------------------------------------------------------------------------*/
/* ＜設計者名＞　　　　　　　　　　　今井　弘幸                     (TD-83) */
/* ＜設計年月日＞                    １９９４年　５月２６日                 */
/*--------------------------------------------------------------------------*/
/* ＜ソース作成者名＞                今井　弘幸                             */
/* ＜ソース作成年月日＞              １９９４年  ５月３０日                 */
/* ＜ソース修正者名＞                今井　弘幸				                */
/* ＜ソース修正年月日及び修正ＩＤ＞  １９９５年　６月２８日 CT1082(ST2908)  */
/* ＜ソース修正者名＞                営業店システム担当(ﾒｰｶ:KSP)			*/
/* ＜ソース修正年月日及び修正ＩＤ＞  １９９７年１０月２８日 		ST4982	*/
/*--------------------------------------------------------------------------*/
/* ＜見積ステップ＞															*/
/*--------------------------------------------------------------------------*/
/* ＜機能概要＞																*/
/*--------------------------------------------------------------------------*/
/* ＜呼出形式＞																*/
/* ＜仮引数＞																*/
/* ＜返却値＞																*/
/*--------------------------------------------------------------------------*/
/* ＜入出力データ構造＞														*/
/* ＜制限事項＞																*/
/* ＜使用外部モジュールＩＤ＞												*/
/*   mrjnl.h																*/
/* ＜呼出元のモジュールＩＤ＞												*/
/****************************************************************************/

/****************************************************************************/
/*	インクルードファイル											        */
/****************************************************************************/
#include	"mrjnl.h"

/****************************************************************************/
/*	返却値	 													        */
/****************************************************************************/
#define MRBNORMAL	0L				  	/* 正常終了							*/
#define	MRBIVPARM	-1L					/* パラメータエラー					*/
#define	MRBRCVFER	-2L					/* ＲＣＶファイル故障中				*/
#define MRBBKSTOP	-3L					/* 終了依頼受信						*/
#define	MRBNSTART	-4L					/* バックアップ続行不能				*/
#define	MRBCMIOER	-5L					/* ﾊﾞｯｸｱｯﾌﾟ元I/Oｴﾗｰによるﾊﾞｯｸｱｯﾌﾟ	*/
										/* 失敗								*/
#define	MRBCSIOER	-6L					/* ﾊﾞｯｸｱｯﾌﾟ先I/Oｴﾗｰによるﾊﾞｯｸｱｯﾌﾟ	*/
										/* 失敗								*/
#define	MRBCPKILL	-7L					/* ﾎﾞﾘｭｰﾑｺﾋﾟｰﾌﾟﾛｾｽ強制終了による	*/
										/* ﾊﾞｯｸｱｯﾌﾟ失敗						*/
#define	MRBDUPVRCV	-8L					/* VRCV前処理中の起動				*/
/*  １行削除														CT1082	*/

/****************************************************************************/
/*	内部返却値	 													        */
/****************************************************************************/
#define MRBABORT	99L					/* 異常終了							*/
#define	MRBGETVCP1	1L					/* mrl1からのﾘｻﾞﾙﾄ受信				*/
#define	MRBGETVCP2	2L					/* mrl2からのﾘｻﾞﾙﾄ受信				*/
#define	MRBGETRBI	3L					/* RBI完了通知受信					*/
#define	MRBGETTIM	4L					/* ﾀｲﾏからのﾘｻﾞﾙﾄ受信				*/
#define	MRBSYSTOP	5L					/* 終了依頼受信(ｼｽﾃﾑｽﾄｯﾌﾟ)			*/
#define	MRBCMSTOP	6L					/* 終了依頼受信(ｺﾏﾝﾄﾞｽﾄｯﾌﾟ)			*/
#define	MRBPKEND 	7L					/* pkillｺﾏﾝﾄﾞ正常終了				*/
#define	MRBPKRTRY	8L					/* pkillｺﾏﾝﾄﾞ再試行					*/
#define	MRBPKERR 	9L					/* pkillｺﾏﾝﾄﾞ異常終了				*/

/****************************************************************************/
/*	共通ＤＥＦＩＮＥ値									     			    */
/****************************************************************************/
#define MRBRQTNUM	2L					/*	ﾘｸｴｽﾄ ｼｷﾍﾞﾂｼ ﾉ ｶｽﾞ			    */

/****************************************************************************/
/*	ＶＭＴリスト      													    */
/****************************************************************************/
struct mrbvmt{
	 char 		mrbvsid;    			/* 処理種別　　　　　　	            */
	 char		mrbvyob[3];             /* 予備                          	*/
	 short		mrbvmt1;        		/* VMT ｴﾝﾄﾘ1                   		*/
	 short		mrbvmt2;        		/* VMT ｴﾝﾄﾘ2                    	*/
};
typedef struct mrbvmt MRBVMT;

/****************************************************************************/
/*  ＭＲＢＣＢ（バックアッププロセス／ＪＮＬ２面構成制御ブロック）		    */
/****************************************************************************/
struct mrbcb{
	 char		mrbpblid[4];			/* ﾌﾞﾛｯｸ 識別子					 	*/
	 long		mrbpbktn;				/* TBKT 資源番号				    */
	 short		mrbpbkte;				/* ﾊﾞｯｸ ｱｯﾌﾟ BKT ｴﾝﾄﾘ			    */
	 char		mrbpjopf;				/* ｼﾞｬｰﾅﾙ ｵｰﾌﾟﾝ ﾌﾗｸﾞ				*/
	 char		mrbpyob1;				/* 予備1							*/
	 char		mrbprbif[3];			/* RBI 定周期停止ﾌﾗｸﾞ				*/
	 char		mrbpespf;				/* 終了同期処理用ﾌﾗｸﾞ			 	*/
	 char		*mrbppctp1;				/* ﾎﾞﾘｭｰﾑｺﾋﾟｰﾌﾟﾛｾｽTPCTｱﾄﾞﾚｽ1		*/
	 char		*mrbppctp2;				/* ﾎﾞﾘｭｰﾑｺﾋﾟｰﾌﾟﾛｾｽTPCTｱﾄﾞﾚｽ2		*/
	 long		mrbprqt1;				/* ﾘｸｴｽﾄ 識別子1				 	*/
	 long		mrbprqt5;				/* ﾘｸｴｽﾄ 識別子5					*/
	 char		*mrbpmgbf;				/* 電文受信 ﾊﾞｯﾌｧ ｱﾄﾞﾚｽ			    */
	 long		mrbpcpcd1;				/* ｺﾋﾟｰ 処理終了ｺｰﾄﾞ1				*/
	 short		mrbprtry;				/* ﾊﾞｯｸ ｱｯﾌﾟ ﾘﾄﾗｲ ﾌﾗｸﾞ				*/
	 short		mrbpvmen;				/* VMT ﾘｽﾄ 処理中 ｴﾝﾄﾘ	        	*/
	 char		mrbpdate[8];			/* ﾊﾞｯｸｱｯﾌﾟ ID 						*/
	 char		*mrbppblt;				/* ｴﾗｰ PBT ﾘｽﾄ 先頭 ｱﾄﾞﾚｽ			*/
	 long		mrbpcpcd2;				/* ｺﾋﾟｰ 処理終了ｺｰﾄﾞ2				*/
	 char		mrbpcpn1[9];			/* ﾎﾞﾘｭｰﾑｺﾋﾟｰﾌﾟﾛｾｽ識別名1			*/
	 char		mrbpyob2[3];			/* 予備2							*/
     char		mrbpcpn2[9];			/* ﾎﾞﾘｭｰﾑｺﾋﾟｰﾌﾟﾛｾｽ識別名2			*/
	 char		mrbpyob3[3];			/* 予備3							*/
	 char		mrbpcmrn[8];			/* CM用RBIﾌﾟﾛｾｽ識別名				*/
	 char		mrbpl0rn[8];			/* LM0用RBIﾌﾟﾛｾｽ識別名				*/
	 char		mrbpl1rn[8];			/* LM1用RBIﾌﾟﾛｾｽ識別名				*/
	 short		mrbptype;				/* 処理種別							*/
	 short		mrbpemid;				/* ｴﾗｰ発生ﾓｼﾞｭｰﾙID					*/
	 long		mrbpedi1;				/* ｴﾗｰ詳細情報1						*/
	 long		mrbpedi2;				/* ｴﾗｰ詳細情報2						*/
	 long		mrbpedi3;				/* ｴﾗｰ詳細情報3						*/
	 long		mrbpsdtj1;				/* 初期JNL上のSMP日付1				*/
	 long		mrbpsdtj2;				/* 初期JNL上のSMP日付2				*/
	 long		mrbpsdtk1;				/* 初期JNL上のSMP日付1				*/
	 long		mrbpsdtk2;				/* 初期JNL上のSMP日付2				*/
	 MRBVMT		mrbpvmlt[21];   		/* VMT ﾘｽﾄ      					*/
};
typedef struct mrbcb MRBCB;

/****************************************************************************/
/*	ＲＢＩ定周期停止フラグのＤＥＦＩＮＥ							        */
/****************************************************************************/
#define MRBPRBION	0x01				/* RBI 定周期停止		 			*/

/****************************************************************************/
/*	ジャーナルオープンフラグのＤＥＦＩＮＥ								    */
/****************************************************************************/
#define MRBPJOPON	0x01				/* ｼﾞｬｰﾅﾙ ｵｰﾌﾟﾝ ﾌﾗｸﾞ ｵﾝ	     	    */
#define MRBPJOPOF	0x00				/* ｼﾞｬｰﾅﾙ ｵｰﾌﾟﾝ ﾌﾗｸﾞ ｵﾌ			    */

/****************************************************************************/
/* バックアップリトライフラグのＤＥＦＩＮＥ									*/
/****************************************************************************/
#define MRBPRTRY	0x0001		        /* ﾊﾞｯｸ ｱｯﾌﾟ ﾘﾄﾗｲ ﾌﾗｸﾞ ｵﾝ	        */

/****************************************************************************/
/* エラーＰＢＴリストのＤＥＦＩＮＥ										    */
/****************************************************************************/
#define MRBPPBER	0x01				/* PBT ﾘｽﾄ ｴﾗｰ ﾌﾗｸﾞ ｵﾝ		        */
#define MRBPURAE	0x02				/* PBT ﾘｽﾄ ｳﾗﾒﾝ ｴﾗｰ ﾌﾗｸﾞ ｵﾝ	   		*/
#define MRBPREDY	0x03				/* PBT ﾘｽﾄ ｼｮﾘｽﾞﾐ ﾌﾗｸﾞ ｵﾝ	    	*/

/****************************************************************************/
/* 処理種別のＤＥＦＩＮＥ													*/
/****************************************************************************/
#define	MRBPCOBK	0x0001				/* 一般ﾌｧｲﾙﾊﾞｯｸｱｯﾌﾟ指定				*/
#define	MRBPKJCH	0x0002				/* 勘定照合ﾌｧｲﾙ面切替指定			*/
#define	MRBPKJBK	0x0003				/* 勘定照合ﾌｧｲﾙﾊﾞｯｸｱｯﾌﾟ指定			*/
/****************************************************************************/
/* ＲＢＩプロセス電文送信用ＤＥＦＩＮＥ										*/
/****************************************************************************/
#define	MRBCMRBI	0x01				/* CM用RBIへ電文送信				*/
#define	MRBLM0RBI	0x02				/* LM0用RBIへ電文送信				*/
#define	MRBLM1RBI	0x03				/* LM1用RBIへ電文送信				*/
/****************************************************************************/
/* 終了同期処理用フラグのＤＥＦＩＮＥ										*/
/****************************************************************************/
#define	MRBPESPON	0x01				/* 終了同期用フラグオン				*/

/****************************************************************************/
/* ジャーナル編集域															*/
/****************************************************************************/
struct	jnl{
	MRJVC1	jvc1;
	MRJSMP	smp;
	MRJNL	fjnl;
	long	rlen;
	MRJVC2	jvc2;
};
typedef	struct	jnl	MRBEDJNL;

/****************************************************************************/
/* エラー情報設定領域初期化のＤＥＦＩＮＥ									*/
/****************************************************************************/
#define	MRBECLR	mc_clea((char *)&bcb->mrbpemid,0x00,sizeof(bcb->mrbpemid)); \
				mc_clea((char *)&bcb->mrbpedi1,0x00,sizeof(bcb->mrbpedi1)); \
				mc_clea((char *)&bcb->mrbpedi2,0x00,sizeof(bcb->mrbpedi2)); \
				mc_clea((char *)&bcb->mrbpedi3,0x00,sizeof(bcb->mrbpedi3))
